<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> 
<title>WebTau: Files Upload</title>
<link rel="stylesheet" type="text/css" href="/webtau/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/main.css">
<link rel="stylesheet" type="text/css" href="/webtau/logo.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/css/global-overrides.css">
</head>
<link rel="shortcut icon" href="/webtau/favicon.png"type="image/ico"/>
<body class="theme-znai-dark">
<script>(function() {
    var themeNameKey = 'znaiTheme';
    var darkThemeName = 'znai-dark';
    var lightThemeName = 'default';

    var znaiTheme = {
        changeHandlers: [],
        addChangeHandler(handler) {
            this.changeHandlers.push(handler);
        },
        removeChangeHandler(handler) {
            var idx = this.changeHandlers.indexOf(handler);
            this.changeHandlers.splice(idx, 1);
        },
        set(name) {
            this.name = name;
            document.body.className = 'theme-' + name;

            var idx = 0;
            var len = this.changeHandlers.length;
            for (; idx < len; idx++) {
                this.changeHandlers[idx](name);
            }
        },
        setExplicitly(name) {
            storeThemeName(name);
            this.set(name);
        },
        setExplicitlyIfNotSetAlready(name) {
            const themeName = getStoredThemeName();
            if (themeName) {
                return
            }

            this.setExplicitly(name)
        },
        toggle() {
            this.setExplicitly(this.name === lightThemeName ? darkThemeName : lightThemeName)
        }
    };

    var mediaThemeName = setLightMatchMediaListenerAndGetThemeName()
    var themeName = getStoredThemeName() || mediaThemeName;
    znaiTheme.set(themeName);

    window.znaiTheme = znaiTheme;

    function getStoredThemeName() {
        return localStorage.getItem(themeNameKey);
    }

    function storeThemeName(name) {
        return localStorage.setItem(themeNameKey, name);
    }

    function setLightMatchMediaListenerAndGetThemeName() {
        if (!window.matchMedia) {
            return darkThemeName;
        }

        var lightQuery = window.matchMedia('(prefers-color-scheme: light)');
        lightQuery.addListener(function (e) {
            const newThemeName = e.matches ? lightThemeName : darkThemeName;
            znaiTheme.setExplicitly(newThemeName);
        });

        return lightQuery.matches ? lightThemeName : darkThemeName;
    }
})()</script>
<div id="znai"><div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>File System Content</h1></header>
<p>In following examples backend expects a file passed as multipart/form-data . File content is expected to be stored in file field. Backend responds with received file name and file description.To POST form data, you need to use the same http.post statement as you saw in previous examples. Second parameter should be http.formData instead of a map payload we used for JSON . def imagePath = testResourcePath(&quot;src/test/resources/image.png&quot;) http.post(&quot;/file-upload&quot;, http.formData(file: imagePath)) { fileName.should == 'image.png' } Use http.formFile to override file name that is being sent to the backend. def imagePath = testResourcePath(&quot;src/test/resources/image.png&quot;) http.post(&quot;/file-upload&quot;, http.formData(file: http.formFile('myFileName.png', imagePath))) { fileName.should == 'myFileName.png' } Multiple form fields can be specified like in the example below. def imagePath = testResourcePath(&quot;src/test/resources/image.png&quot;) http.post(&quot;/file-upload&quot;, http.formData(file: imagePath, fileDescription: 'new report')) { fileName.should == 'image.png' description.should == 'new report' }</p>
</article>

<article>
<header><h1>In-Memory Content</h1></header>
<p>If your test already has content, you can explicitly pass it as is. byte[] fileContent = [1, 2, 3, 4] as byte[] http.post(&quot;/file-upload&quot;, http.formData(file: fileContent)) { fileName.should == 'backend-generated-name-as-no-name-provided' } Note: no file name is passed and this particular backend generated file name on your behalf.Use http.formFile to provide a file name byte[] fileContent = [1, 2, 3, 4] as byte[] http.post(&quot;/file-upload&quot;, http.formData( file: http.formFile('myFileName.dat', fileContent))) { fileName.should == 'myFileName.dat' }</p>
</article>
</section>
</div>
<script type="text/javascript" src="/webtau/toc.js"></script>
<script type="text/javascript" src="/webtau/documentation-references.js"></script>
<script type="text/javascript" src="/webtau/assets.js"></script>
<script type="text/javascript" src="/webtau/static/main.js"></script>
<script type="text/javascript" src="/webtau/search-index.js"></script>
<script>
document.getElementById('znai').innerHTML = '';
/*<!--*/
ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/testingisdocumenting/webtau/tree/master/webtau-docs/znai",
      "title" : "View On GitHub"
    },
    "id" : "webtau",
    "title" : "WebTau",
    "type" : "Guide",
    "previewEnabled" : false,
    "allowedGroups" : [ "admin" ]
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "title" : "File System Content",
      "id" : "file-system-content",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "In following examples backend expects a file passed as ",
          "type" : "SimpleText"
        }, {
          "code" : "multipart/form-data",
          "type" : "InlinedCode"
        }, {
          "text" : ". File content is expected to be stored in ",
          "type" : "SimpleText"
        }, {
          "code" : "file",
          "type" : "InlinedCode"
        }, {
          "text" : " field.",
          "type" : "SimpleText"
        }, {
          "type" : "HardLineBreak"
        }, {
          "text" : "Backend responds with received file name and file description.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To ",
          "type" : "SimpleText"
        }, {
          "code" : "POST",
          "type" : "InlinedCode"
        }, {
          "text" : " form data, you need to use the same ",
          "type" : "SimpleText"
        }, {
          "code" : "http.post",
          "type" : "InlinedCode"
        }, {
          "text" : " statement as you saw in previous examples.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "Second parameter should be ",
          "type" : "SimpleText"
        }, {
          "code" : "http.formData",
          "type" : "InlinedCode"
        }, {
          "text" : " instead of a map payload we used for ",
          "type" : "SimpleText"
        }, {
          "code" : "JSON",
          "type" : "InlinedCode"
        }, {
          "text" : ".",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def imagePath = testResourcePath(\"src/test/resources/image.png\")\n\nhttp.post(\"/file-upload\", http.formData(file: imagePath)) {\n    fileName.should == 'image.png'\n}",
        "entry" : "file upload example simple",
        "bodyOnly" : true,
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Use ",
          "type" : "SimpleText"
        }, {
          "code" : "http.formFile",
          "type" : "InlinedCode"
        }, {
          "text" : " to override file name that is being sent to the backend.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def imagePath = testResourcePath(\"src/test/resources/image.png\")\n\nhttp.post(\"/file-upload\", http.formData(file: http.formFile('myFileName.png', imagePath))) {\n    fileName.should == 'myFileName.png'\n}",
        "entry" : "file upload example with file name override",
        "bodyOnly" : true,
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Multiple form fields can be specified like in the example below.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def imagePath = testResourcePath(\"src/test/resources/image.png\")\n\nhttp.post(\"/file-upload\", http.formData(file: imagePath, fileDescription: 'new report')) {\n    fileName.should == 'image.png'\n    description.should == 'new report'\n}",
        "entry" : "file upload example multiple fields",
        "bodyOnly" : true,
        "type" : "Snippet"
      } ]
    }, {
      "title" : "In-Memory Content",
      "id" : "in-memory-content",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "If your test already has content, you can explicitly pass it as is.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "byte[] fileContent = [1, 2, 3, 4] as byte[]\n\nhttp.post(\"/file-upload\", http.formData(file: fileContent)) {\n    fileName.should == 'backend-generated-name-as-no-name-provided'\n}",
        "entry" : "file upload example with in-memory content",
        "bodyOnly" : true,
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Note: no file name is passed and this particular backend generated file name on your behalf.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Use ",
          "type" : "SimpleText"
        }, {
          "code" : "http.formFile",
          "type" : "InlinedCode"
        }, {
          "text" : " to provide a file name",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "byte[] fileContent = [1, 2, 3, 4] as byte[]\n\nhttp.post(\"/file-upload\", http.formData(\n        file: http.formFile('myFileName.dat', fileContent))) {\n    fileName.should == 'myFileName.dat'\n}",
        "entry" : "file upload example with in-memory content and file name",
        "bodyOnly" : true,
        "type" : "Snippet"
      } ]
    } ],
    "lastModifiedTime" : 1616434529902,
    "tocItem" : {
      "sectionTitle" : "HTTP",
      "pageTitle" : "Files Upload",
      "pageMeta" : { },
      "dirName" : "HTTP",
      "fileName" : "files-upload",
      "viewOnRelativePath" : null,
      "pageSectionIdTitles" : [ {
        "title" : "File System Content",
        "id" : "file-system-content"
      }, {
        "title" : "In-Memory Content",
        "id" : "in-memory-content"
      } ]
    }
  },
  "footer" : {
    "type" : "Footer",
    "content" : [ {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "If you have documentation suggestions, features or bugs to report, please create ",
        "type" : "SimpleText"
      }, {
        "url" : "https://github.com/testingisdocumenting/webtau/issues",
        "isFile" : false,
        "type" : "Link",
        "content" : [ {
          "text" : "GitHub Issue",
          "type" : "SimpleText"
        } ]
      } ]
    }, {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "Contributions are welcome",
        "type" : "SimpleText"
      } ]
    } ]
  }
}), document.getElementById("znai"));
/*-->*/

</script>

</body>
</html>
